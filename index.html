<html>

<head>
    <script type="text/javascript" src="src.js"></script>

    <style type="text/css">
        #mynetwork {
            width: 800px;
            height: 600px;
            border: 1px solid lightgray;
        }
    </style>

    <title>Graph Visualizer</title>
</head>

<body>
    <div id="mynetwork"></div>
    <textarea id="inputdata"></textarea>
    <button onclick="restart()">View as graph</button>

    <script type="text/javascript">
        // var nodes = new vis.DataSet([
        //     {id: 1, label: 'Node 1'},
        //     {id: 2, label: 'Node 2'},
        //     {id: 3, label: 'Node 3'},
        //     {id: 4, label: 'Node 4'},
        //     {id: 5, label: 'Node 5'}
        // ]);

        function load(dataEdges) {
            var dataNodes = [];
            for (let edge of dataEdges) {
                if (!dataNodes.includes(edge[0])) {
                    dataNodes.push(edge[0]);
                }

                if (!dataNodes.includes(edge[1])) {
                    dataNodes.push(edge[1]);
                }
            }

            var nodes = new vis.DataSet();
            for (let node of dataNodes) {
                nodes.add({ id: node, label: `${node}` });
            }

            var edges = new vis.DataSet();
            for (let edge of dataEdges) {
                edges.add({ from: edge[0], to: edge[1] });
            }

            // var edges = new vis.DataSet([
            //     { from: 1, to: 3 },
            //     { from: 1, to: 2 },
            //     { from: 2, to: 4 },
            //     { from: 2, to: 5 }
            // ]);

            // create a network
            var container = document.getElementById('mynetwork');

            // provide the data in the vis format
            var data = {
                nodes: nodes,
                edges: edges
            };
            var options = {};

            // initialize your network!
            var network = new vis.Network(container, data, options);
        }

        function restart() {
            var data = document.getElementById("inputdata").value;
            var dataEdges = [];

            if (data !== "" && data !== null) {
                dataEdges = JSON.parse(data);
            }

            if (dataEdges.length == 0) {
                dataEdges = [[0,1],[2,1],[3,2],[4,2],[4,5],[6,0],[5,7],[8,4],[9,2]];
            }

            load(dataEdges);
        }

        restart();
    </script>
</body>

</html>